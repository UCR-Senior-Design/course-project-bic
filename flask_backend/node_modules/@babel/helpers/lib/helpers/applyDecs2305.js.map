<<<<<<< HEAD
{"version":3,"names":["_checkInRHS","require","_setFunctionName","_toPropertyKey","applyDecs2305","targetClass","memberDecs","classDecs","classDecsHaveThis","instanceBrand","parentClass","_bindPropCall","obj","name","before","_this","value","call","runInitializers","initializers","i","length","assertCallable","fn","hint1","hint2","throwUndefined","TypeError","applyDec","Class","decInfo","decoratorsHaveThis","kind","metadata","ret","isStatic","isPrivate","isField","isAccessor","hasPrivateBrand","assertInstanceIfPrivate","target","decs","decVal","_","isClass","Array","isArray","desc","init","key","get","setFunctionName","set","Object","getOwnPropertyDescriptor","newValue","dec","decThis","decoratorFinishedRef","ctx","addInitializer","initializer","v","Error","push","bind","static","private","access","has","instance","defineProperty","applyMemberDecs","decInfos","protoInitializers","staticInitializers","staticBrand","checkInRHS","existingNonFields","Map","pushInitializers","existingKind","prototype","toPropertyKey","defineMetadata","Symbol","for","configurable","enumerable","arguments","parentMetadata","create","e","c"],"sources":["../../src/helpers/applyDecs2305.ts"],"sourcesContent":["/* @minVersion 7.21.0 */\n/* @mangleFns */\n\nimport checkInRHS from \"./checkInRHS.ts\";\nimport setFunctionName from \"./setFunctionName.ts\";\nimport toPropertyKey from \"./toPropertyKey.ts\";\n\nconst enum PROP_KIND {\n  FIELD = 0,\n  ACCESSOR = 1,\n  METHOD = 2,\n  GETTER = 3,\n  SETTER = 4,\n  CLASS = 5,\n\n  STATIC = 8,\n\n  DECORATORS_HAVE_THIS = 16,\n}\n\ntype DecoratorFinishedRef = { v?: boolean };\ntype DecoratorContextAccess = {\n  get?: (target: object) => any;\n  set?: (target: object, value: any) => void;\n  has: (target: object) => boolean;\n};\ntype DecoratorContext = {\n  kind: \"accessor\" | \"method\" | \"getter\" | \"setter\" | \"field\" | \"class\";\n  name: string;\n  static?: boolean;\n  private?: boolean;\n  access?: DecoratorContextAccess;\n  metadata?: any;\n  addInitializer?: (initializer: Function) => void;\n};\ntype DecoratorInfo =\n  | [\n      decs: Function | Function[],\n      kind: PROP_KIND,\n      name: string,\n      any?,\n      Function?,\n    ]\n  | [classDecs: Function[]];\n\n/**\n  Basic usage:\n\n  applyDecs(\n    Class,\n    [\n      // member decorators\n      [\n        decs,               // dec, or array of decs, or array of this values and decs\n        0,                  // kind of value being decorated\n        'prop',             // name of public prop on class containing the value being decorated,\n        '#p',               // the name of the private property (if is private, void 0 otherwise),\n      ]\n    ],\n    [\n      // class decorators\n      dec1, dec2\n    ]\n  )\n  ```\n\n  Fully transpiled example:\n\n  ```js\n  @dec\n  class Class {\n    @dec\n    a = 123;\n\n    @dec\n    #a = 123;\n\n    @dec\n    @dec2\n    accessor b = 123;\n\n    @dec\n    accessor #b = 123;\n\n    @dec\n    c() { console.log('c'); }\n\n    @dec\n    #c() { console.log('privC'); }\n\n    @dec\n    get d() { console.log('d'); }\n\n    @dec\n    get #d() { console.log('privD'); }\n\n    @dec\n    set e(v) { console.log('e'); }\n\n    @dec\n    set #e(v) { console.log('privE'); }\n  }\n\n\n  // becomes\n  let initializeInstance;\n  let initializeClass;\n\n  let initA;\n  let initPrivA;\n\n  let initB;\n  let initPrivB, getPrivB, setPrivB;\n\n  let privC;\n  let privD;\n  let privE;\n\n  let Class;\n  class _Class {\n    static {\n      let ret = applyDecs(\n        this,\n        [\n          [dec, 0, 'a'],\n          [dec, 0, 'a', (i) => i.#a, (i, v) => i.#a = v],\n          [[dec, dec2], 1, 'b'],\n          [dec, 1, 'b', (i) => i.#privBData, (i, v) => i.#privBData = v],\n          [dec, 2, 'c'],\n          [dec, 2, 'c', () => console.log('privC')],\n          [dec, 3, 'd'],\n          [dec, 3, 'd', () => console.log('privD')],\n          [dec, 4, 'e'],\n          [dec, 4, 'e', () => console.log('privE')],\n        ],\n        [\n          dec\n        ]\n      );\n\n      initA = ret[0];\n\n      initPrivA = ret[1];\n\n      initB = ret[2];\n\n      initPrivB = ret[3];\n      getPrivB = ret[4];\n      setPrivB = ret[5];\n\n      privC = ret[6];\n\n      privD = ret[7];\n\n      privE = ret[8];\n\n      initializeInstance = ret[9];\n\n      Class = ret[10]\n\n      initializeClass = ret[11];\n    }\n\n    a = (initializeInstance(this), initA(this, 123));\n\n    #a = initPrivA(this, 123);\n\n    #bData = initB(this, 123);\n    get b() { return this.#bData }\n    set b(v) { this.#bData = v }\n\n    #privBData = initPrivB(this, 123);\n    get #b() { return getPrivB(this); }\n    set #b(v) { setPrivB(this, v); }\n\n    c() { console.log('c'); }\n\n    #c(...args) { return privC(this, ...args) }\n\n    get d() { console.log('d'); }\n\n    get #d() { return privD(this); }\n\n    set e(v) { console.log('e'); }\n\n    set #e(v) { privE(this, v); }\n  }\n\n  initializeClass(Class);\n */\n\nexport default /* @no-mangle */ function applyDecs2305(\n  targetClass: any,\n  memberDecs: DecoratorInfo[],\n  classDecs: Function[],\n  classDecsHaveThis: number,\n  instanceBrand: Function,\n  parentClass: any,\n) {\n  function _bindPropCall(obj: any, name: string, before?: Function) {\n    return function (_this: any, value?: any) {\n      if (before) {\n        before(_this);\n      }\n      return obj[name].call(_this, value);\n    };\n  }\n\n  function runInitializers(initializers: Function[], value: any) {\n    for (var i = 0; i < initializers.length; i++) {\n      initializers[i].call(value);\n    }\n    return value;\n  }\n\n  function assertCallable(\n    fn: any,\n    hint1: string,\n    hint2?: string,\n    throwUndefined?: boolean,\n  ) {\n    if (typeof fn !== \"function\") {\n      if (throwUndefined || fn !== void 0) {\n        throw new TypeError(\n          hint1 +\n            \" must \" +\n            (hint2 || \"be\") +\n            \" a function\" +\n            (throwUndefined ? \"\" : \" or undefined\"),\n        );\n      }\n    }\n    return fn;\n  }\n\n  /* @no-mangle */\n  function applyDec(\n    Class: any,\n    decInfo: DecoratorInfo,\n    decoratorsHaveThis: number,\n    name: string,\n    kind: PROP_KIND,\n    metadata: any,\n    initializers: Function[],\n    ret?: Function[],\n    isStatic?: boolean,\n    isPrivate?: boolean,\n    isField?: boolean,\n    isAccessor?: boolean,\n    hasPrivateBrand?: Function,\n  ) {\n    function assertInstanceIfPrivate(target: any) {\n      if (!hasPrivateBrand(target)) {\n        throw new TypeError(\n          \"Attempted to access private element on non-instance\",\n        );\n      }\n    }\n\n    var decs = decInfo[0],\n      decVal = decInfo[3],\n      _: any,\n      isClass = !ret;\n\n    if (!isClass) {\n      if (!decoratorsHaveThis && !Array.isArray(decs)) {\n        decs = [decs];\n      }\n\n      var desc: PropertyDescriptor = {},\n        init: Function[] = [],\n        key: \"get\" | \"set\" | \"value\" =\n          kind === PROP_KIND.GETTER\n            ? \"get\"\n            : kind === PROP_KIND.SETTER || isAccessor\n              ? \"set\"\n              : \"value\";\n\n      if (isPrivate) {\n        if (isField || isAccessor) {\n          desc = {\n            get: setFunctionName(\n              function (this: any) {\n                return decVal(this);\n              },\n              name,\n              \"get\",\n            ),\n            set: function (this: any, value: any) {\n              decInfo[4](this, value);\n            },\n          };\n        } else {\n          desc[key] = decVal;\n        }\n\n        if (!isField) {\n          setFunctionName(\n            desc[key],\n            name,\n            kind === PROP_KIND.METHOD ? \"\" : key,\n          );\n        }\n      } else if (!isField) {\n        desc = Object.getOwnPropertyDescriptor(Class, name);\n      }\n    }\n\n    var newValue;\n\n    for (var i = decs.length - 1; i >= 0; i -= decoratorsHaveThis ? 2 : 1) {\n      var dec = (decs as Function[])[i],\n        decThis = decoratorsHaveThis ? (decs as any[])[i - 1] : void 0;\n\n      var decoratorFinishedRef: DecoratorFinishedRef = {};\n      var ctx: DecoratorContext = {\n        kind: [\n          \"field\",\n          \"accessor\",\n          \"method\",\n          \"getter\",\n          \"setter\",\n          \"field\",\n          \"class\",\n        ][kind] as any,\n\n        name: name,\n        metadata: metadata,\n        addInitializer: function (\n          decoratorFinishedRef: DecoratorFinishedRef,\n          initializer: Function,\n        ) {\n          if (decoratorFinishedRef.v) {\n            throw new Error(\n              \"attempted to call addInitializer after decoration was finished\",\n            );\n          }\n          assertCallable(initializer, \"An initializer\", \"be\", true);\n          initializers.push(initializer);\n        }.bind(null, decoratorFinishedRef),\n      };\n\n      try {\n        if (isClass) {\n          newValue = dec.call(decThis, Class, ctx);\n        } else {\n          ctx.static = isStatic;\n          ctx.private = isPrivate;\n\n          var get, set;\n          if (!isPrivate && (isField || kind === PROP_KIND.METHOD)) {\n            get = function (target: any) {\n              return target[name];\n            };\n            if (isField) {\n              set = function (target: any, v: any) {\n                target[name] = v;\n              };\n            }\n          } else if (kind === PROP_KIND.METHOD) {\n            get = function (_this: any) {\n              assertInstanceIfPrivate(_this);\n              return desc.value;\n            };\n          } else {\n            if (kind < PROP_KIND.METHOD || kind === PROP_KIND.GETTER) {\n              get = _bindPropCall(\n                desc,\n                \"get\",\n                isPrivate && assertInstanceIfPrivate,\n              );\n            }\n            if (kind < PROP_KIND.METHOD || kind === PROP_KIND.SETTER) {\n              set = _bindPropCall(\n                desc,\n                \"set\",\n                isPrivate && assertInstanceIfPrivate,\n              );\n            }\n          }\n\n          var access: DecoratorContextAccess = (ctx.access = {\n            has: isPrivate\n              ? // @ts-expect-error no thisArg\n                hasPrivateBrand.bind()\n              : function (target: object) {\n                  return name in target;\n                },\n          });\n          if (get) access.get = get;\n          if (set) access.set = set;\n\n          newValue = dec.call(\n            decThis,\n            isAccessor\n              ? {\n                  get: desc.get,\n                  set: desc.set,\n                }\n              : desc[key],\n            ctx,\n          );\n\n          if (isAccessor) {\n            if (typeof newValue === \"object\" && newValue) {\n              if ((_ = assertCallable(newValue.get, \"accessor.get\"))) {\n                desc.get = _;\n              }\n              if ((_ = assertCallable(newValue.set, \"accessor.set\"))) {\n                desc.set = _;\n              }\n              if ((_ = assertCallable(newValue.init, \"accessor.init\"))) {\n                init.push(_);\n              }\n            } else if (newValue !== void 0) {\n              throw new TypeError(\n                \"accessor decorators must return an object with get, set, or init properties or void 0\",\n              );\n            }\n          } else if (\n            assertCallable(\n              newValue,\n              (isField ? \"field\" : \"method\") + \" decorators\",\n              \"return\",\n            )\n          ) {\n            if (isField) {\n              init.push(newValue);\n            } else {\n              desc[key] = newValue;\n            }\n          }\n        }\n      } finally {\n        decoratorFinishedRef.v = true;\n      }\n    }\n\n    if (isField || isAccessor) {\n      ret.push(function (instance: any, value: any) {\n        for (var i = init.length - 1; i >= 0; i--) {\n          value = init[i].call(instance, value);\n        }\n        return value;\n      });\n    }\n\n    if (!isField && !isClass) {\n      if (isPrivate) {\n        if (isAccessor) {\n          ret.push(_bindPropCall(desc, \"get\"), _bindPropCall(desc, \"set\"));\n        } else {\n          ret.push(\n            kind === PROP_KIND.METHOD\n              ? desc[key]\n              : _bindPropCall.call.bind(desc[key]),\n          );\n        }\n      } else {\n        Object.defineProperty(Class, name, desc);\n      }\n    }\n    return newValue;\n  }\n\n  /* @no-mangle */\n  function applyMemberDecs(\n    Class: any,\n    decInfos: DecoratorInfo[],\n    instanceBrand: Function,\n    metadata: any,\n  ) {\n    var ret: Function[] = [];\n    var protoInitializers: Function[];\n    var staticInitializers: Function[];\n    var staticBrand = function (_: any) {\n      return checkInRHS(_) === Class;\n    };\n\n    var existingNonFields = new Map();\n\n    function pushInitializers(initializers: Function[]) {\n      if (initializers) {\n        ret.push(runInitializers.bind(null, initializers));\n      }\n    }\n\n    for (var i = 0; i < decInfos.length; i++) {\n      var decInfo = decInfos[i];\n\n      // skip computed property names\n      if (!Array.isArray(decInfo)) continue;\n\n      var kind = decInfo[1];\n      var name = decInfo[2];\n      var isPrivate = decInfo.length > 3;\n\n      var decoratorsHaveThis = kind & PROP_KIND.DECORATORS_HAVE_THIS;\n      var isStatic = !!(kind & PROP_KIND.STATIC);\n\n      kind &= 7; /* 0b111 */\n\n      var isField = kind === PROP_KIND.FIELD;\n\n      var key = name + \"/\" + isStatic;\n\n      if (!isField && !isPrivate) {\n        var existingKind = existingNonFields.get(key);\n\n        if (\n          existingKind === true ||\n          (existingKind === PROP_KIND.GETTER && kind !== PROP_KIND.SETTER) ||\n          (existingKind === PROP_KIND.SETTER && kind !== PROP_KIND.GETTER)\n        ) {\n          throw new Error(\n            \"Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: \" +\n              name,\n          );\n        }\n        existingNonFields.set(key, kind > PROP_KIND.METHOD ? kind : true);\n      }\n\n      applyDec(\n        isStatic ? Class : Class.prototype,\n        decInfo,\n        decoratorsHaveThis,\n        isPrivate ? \"#\" + name : (toPropertyKey(name) as string),\n        kind,\n        metadata,\n        isStatic\n          ? (staticInitializers = staticInitializers || [])\n          : (protoInitializers = protoInitializers || []),\n        ret,\n        isStatic,\n        isPrivate,\n        isField,\n        kind === PROP_KIND.ACCESSOR,\n        isStatic && isPrivate ? staticBrand : instanceBrand,\n      );\n    }\n\n    pushInitializers(protoInitializers);\n    pushInitializers(staticInitializers);\n    return ret;\n  }\n\n  function defineMetadata(Class: any, metadata: any) {\n    return Object.defineProperty(\n      Class,\n      Symbol.metadata || Symbol.for(\"Symbol.metadata\"),\n      { configurable: true, enumerable: true, value: metadata },\n    );\n  }\n\n  if (arguments.length >= 6) {\n    var parentMetadata =\n      parentClass[Symbol.metadata || Symbol.for(\"Symbol.metadata\")];\n  }\n  var metadata = Object.create(parentMetadata == null ? null : parentMetadata);\n  var e = applyMemberDecs(targetClass, memberDecs, instanceBrand, metadata);\n  if (!classDecs.length) defineMetadata(targetClass, metadata);\n  return {\n    e: e,\n    // Lazily apply class decorations so that member init locals can be properly bound.\n    get c() {\n      // The transformer will not emit assignment when there are no class decorators,\n      // so we don't have to return an empty array here.\n      var initializers: Function[] = [];\n      return (\n        classDecs.length && [\n          defineMetadata(\n            assertCallable(\n              applyDec(\n                targetClass,\n                [classDecs],\n                classDecsHaveThis,\n                targetClass.name,\n                PROP_KIND.CLASS,\n                metadata,\n                initializers,\n              ),\n              \"class decorators\",\n              \"return\",\n            ) || targetClass,\n            metadata,\n          ),\n          runInitializers.bind(null, initializers, targetClass),\n        ]\n      );\n    },\n  };\n}\n"],"mappings":"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"}
=======
{"version":3,"names":["_checkInRHS","require","createAddInitializerMethod","initializers","decoratorFinishedRef","addInitializer","initializer","assertNotFinished","assertCallable","push","assertInstanceIfPrivate","has","target","TypeError","memberDec","dec","thisArg","name","desc","kind","isStatic","isPrivate","value","hasPrivateBrand","metadata","kindStr","ctx","static","private","v","get","set","t","call","bind","access","fnName","Error","fn","hint","assertValidReturnValue","type","undefined","init","curryThis1","curryThis2","applyMemberDec","ret","base","decInfo","decoratorsHaveThis","decs","Array","isArray","Object","getOwnPropertyDescriptor","newValue","inc","i","length","newInit","instance","ownInitializers","originalInitializer","args","defineProperty","applyMemberDecs","Class","decInfos","instanceBrand","protoInitializers","staticInitializers","staticBrand","existingProtoNonFields","Map","existingStaticNonFields","_","checkInRHS","prototype","existingNonFields","existingKind","pushInitializers","applyClassDecs","targetClass","classDecs","newClass","nextNewClass","defineMetadata","Symbol","for","configurable","enumerable","applyDecs2305","memberDecs","classDecsHaveThis","parentClass","arguments","parentMetadata","create","e","c"],"sources":["../../src/helpers/applyDecs2305.js"],"sourcesContent":["/* @minVersion 7.21.0 */\n\nimport checkInRHS from \"checkInRHS\";\n\n/**\n  Enums are used in this file, but not assigned to vars to avoid non-hoistable values\n\n  CONSTRUCTOR = 0;\n  PUBLIC = 1;\n  PRIVATE = 2;\n\n  FIELD = 0;\n  ACCESSOR = 1;\n  METHOD = 2;\n  GETTER = 3;\n  SETTER = 4;\n  CLASS = 5; // only used in assertValidReturnValue\n\n  STATIC = 8;\n\n  DECORATORS_HAVE_THIS = 16;\n*/\n\nfunction createAddInitializerMethod(initializers, decoratorFinishedRef) {\n  return function addInitializer(initializer) {\n    assertNotFinished(decoratorFinishedRef, \"addInitializer\");\n    assertCallable(initializer, \"An initializer\");\n    initializers.push(initializer);\n  };\n}\n\nfunction assertInstanceIfPrivate(has, target) {\n  if (!has(target)) {\n    throw new TypeError(\"Attempted to access private element on non-instance\");\n  }\n}\n\nfunction memberDec(\n  dec,\n  thisArg,\n  name,\n  desc,\n  initializers,\n  kind,\n  isStatic,\n  isPrivate,\n  value,\n  hasPrivateBrand,\n  metadata\n) {\n  var kindStr;\n\n  switch (kind) {\n    case 1 /* ACCESSOR */:\n      kindStr = \"accessor\";\n      break;\n    case 2 /* METHOD */:\n      kindStr = \"method\";\n      break;\n    case 3 /* GETTER */:\n      kindStr = \"getter\";\n      break;\n    case 4 /* SETTER */:\n      kindStr = \"setter\";\n      break;\n    default:\n      kindStr = \"field\";\n  }\n\n  var ctx = {\n    kind: kindStr,\n    name: isPrivate ? \"#\" + name : name,\n    static: isStatic,\n    private: isPrivate,\n    metadata: metadata,\n  };\n\n  var decoratorFinishedRef = { v: false };\n\n  if (kind !== 0 /* FIELD */) {\n    ctx.addInitializer = createAddInitializerMethod(\n      initializers,\n      decoratorFinishedRef\n    );\n  }\n\n  var get, set;\n  if (!isPrivate && (kind === 0 /* FIELD */ || kind === 2) /* METHOD */) {\n    get = function (target) {\n      return target[name];\n    };\n    if (kind === 0 /* FIELD */) {\n      set = function (target, v) {\n        target[name] = v;\n      };\n    }\n  } else if (kind === 2 /* METHOD */) {\n    // Assert: isPrivate is true.\n    get = function (target) {\n      assertInstanceIfPrivate(hasPrivateBrand, target);\n      return desc.value;\n    };\n  } else {\n    // Assert: If kind === 0, then isPrivate is true.\n    var t = kind === 0 /* FIELD */ || kind === 1; /* ACCESSOR */\n    if (t || kind === 3 /* GETTER */) {\n      if (isPrivate) {\n        get = function (target) {\n          assertInstanceIfPrivate(hasPrivateBrand, target);\n          return desc.get.call(target);\n        };\n      } else {\n        get = function (target) {\n          return desc.get.call(target);\n        };\n      }\n    }\n    if (t || kind === 4 /* SETTER */) {\n      if (isPrivate) {\n        set = function (target, value) {\n          assertInstanceIfPrivate(hasPrivateBrand, target);\n          desc.set.call(target, value);\n        };\n      } else {\n        set = function (target, value) {\n          desc.set.call(target, value);\n        };\n      }\n    }\n  }\n  var has = isPrivate\n    ? hasPrivateBrand.bind()\n    : function (target) {\n        return name in target;\n      };\n  ctx.access =\n    get && set\n      ? { get: get, set: set, has: has }\n      : get\n        ? { get: get, has: has }\n        : { set: set, has: has };\n\n  try {\n    return dec.call(thisArg, value, ctx);\n  } finally {\n    decoratorFinishedRef.v = true;\n  }\n}\n\nfunction assertNotFinished(decoratorFinishedRef, fnName) {\n  if (decoratorFinishedRef.v) {\n    throw new Error(\n      \"attempted to call \" + fnName + \" after decoration was finished\"\n    );\n  }\n}\n\nfunction assertCallable(fn, hint) {\n  if (typeof fn !== \"function\") {\n    throw new TypeError(hint + \" must be a function\");\n  }\n}\n\nfunction assertValidReturnValue(kind, value) {\n  var type = typeof value;\n\n  if (kind === 1 /* ACCESSOR */) {\n    if (type !== \"object\" || value === null) {\n      throw new TypeError(\n        \"accessor decorators must return an object with get, set, or init properties or void 0\"\n      );\n    }\n    if (value.get !== undefined) {\n      assertCallable(value.get, \"accessor.get\");\n    }\n    if (value.set !== undefined) {\n      assertCallable(value.set, \"accessor.set\");\n    }\n    if (value.init !== undefined) {\n      assertCallable(value.init, \"accessor.init\");\n    }\n  } else if (type !== \"function\") {\n    var hint;\n    if (kind === 0 /* FIELD */) {\n      hint = \"field\";\n    } else if (kind === 5 /* CLASS */) {\n      hint = \"class\";\n    } else {\n      hint = \"method\";\n    }\n    throw new TypeError(hint + \" decorators must return a function or void 0\");\n  }\n}\n\nfunction curryThis1(fn) {\n  return function () {\n    return fn(this);\n  };\n}\nfunction curryThis2(fn) {\n  return function (value) {\n    fn(this, value);\n  };\n}\n\nfunction applyMemberDec(\n  ret,\n  base,\n  decInfo,\n  decoratorsHaveThis,\n  name,\n  kind,\n  isStatic,\n  isPrivate,\n  initializers,\n  hasPrivateBrand,\n  metadata\n) {\n  var decs = decInfo[0];\n\n  if (!decoratorsHaveThis && !Array.isArray(decs)) {\n    decs = [decs];\n  }\n\n  var desc, init, value;\n\n  if (isPrivate) {\n    if (kind === 0 /* FIELD */ || kind === 1 /* ACCESSOR */) {\n      desc = {\n        get: curryThis1(decInfo[3]),\n        set: curryThis2(decInfo[4]),\n      };\n    } else {\n      if (kind === 3 /* GETTER */) {\n        desc = {\n          get: decInfo[3],\n        };\n      } else if (kind === 4 /* SETTER */) {\n        desc = {\n          set: decInfo[3],\n        };\n      } else {\n        desc = {\n          value: decInfo[3],\n        };\n      }\n    }\n  } else if (kind !== 0 /* FIELD */) {\n    desc = Object.getOwnPropertyDescriptor(base, name);\n  }\n\n  if (kind === 1 /* ACCESSOR */) {\n    value = {\n      get: desc.get,\n      set: desc.set,\n    };\n  } else if (kind === 2 /* METHOD */) {\n    value = desc.value;\n  } else if (kind === 3 /* GETTER */) {\n    value = desc.get;\n  } else if (kind === 4 /* SETTER */) {\n    value = desc.set;\n  }\n\n  var newValue, get, set;\n\n  var inc = decoratorsHaveThis ? 2 : 1;\n\n  for (var i = decs.length - 1; i >= 0; i -= inc) {\n    var dec = decs[i];\n\n    newValue = memberDec(\n      dec,\n      decoratorsHaveThis ? decs[i - 1] : undefined,\n      name,\n      desc,\n      initializers,\n      kind,\n      isStatic,\n      isPrivate,\n      value,\n      hasPrivateBrand,\n      metadata\n    );\n\n    if (newValue !== void 0) {\n      assertValidReturnValue(kind, newValue);\n      var newInit;\n\n      if (kind === 0 /* FIELD */) {\n        newInit = newValue;\n      } else if (kind === 1 /* ACCESSOR */) {\n        newInit = newValue.init;\n        get = newValue.get || value.get;\n        set = newValue.set || value.set;\n\n        value = { get: get, set: set };\n      } else {\n        value = newValue;\n      }\n\n      if (newInit !== void 0) {\n        if (init === void 0) {\n          init = newInit;\n        } else if (typeof init === \"function\") {\n          init = [init, newInit];\n        } else {\n          init.push(newInit);\n        }\n      }\n    }\n  }\n\n  if (kind === 0 /* FIELD */ || kind === 1 /* ACCESSOR */) {\n    if (init === void 0) {\n      // If the initializer was void 0, sub in a dummy initializer\n      init = function (instance, init) {\n        return init;\n      };\n    } else if (typeof init !== \"function\") {\n      var ownInitializers = init;\n\n      init = function (instance, init) {\n        var value = init;\n\n        for (var i = ownInitializers.length - 1; i >= 0; i--) {\n          value = ownInitializers[i].call(instance, value);\n        }\n\n        return value;\n      };\n    } else {\n      var originalInitializer = init;\n\n      init = function (instance, init) {\n        return originalInitializer.call(instance, init);\n      };\n    }\n\n    ret.push(init);\n  }\n\n  if (kind !== 0 /* FIELD */) {\n    if (kind === 1 /* ACCESSOR */) {\n      desc.get = value.get;\n      desc.set = value.set;\n    } else if (kind === 2 /* METHOD */) {\n      desc.value = value;\n    } else if (kind === 3 /* GETTER */) {\n      desc.get = value;\n    } else if (kind === 4 /* SETTER */) {\n      desc.set = value;\n    }\n\n    if (isPrivate) {\n      if (kind === 1 /* ACCESSOR */) {\n        ret.push(function (instance, args) {\n          return value.get.call(instance, args);\n        });\n        ret.push(function (instance, args) {\n          return value.set.call(instance, args);\n        });\n      } else if (kind === 2 /* METHOD */) {\n        ret.push(value);\n      } else {\n        ret.push(function (instance, args) {\n          return value.call(instance, args);\n        });\n      }\n    } else {\n      Object.defineProperty(base, name, desc);\n    }\n  }\n}\n\nfunction applyMemberDecs(Class, decInfos, instanceBrand, metadata) {\n  var ret = [];\n  var protoInitializers;\n  var staticInitializers;\n  var staticBrand;\n\n  var existingProtoNonFields = new Map();\n  var existingStaticNonFields = new Map();\n\n  for (var i = 0; i < decInfos.length; i++) {\n    var decInfo = decInfos[i];\n\n    // skip computed property names\n    if (!Array.isArray(decInfo)) continue;\n\n    var kind = decInfo[1];\n    var name = decInfo[2];\n    var isPrivate = decInfo.length > 3;\n\n    var decoratorsHaveThis = kind & 16; /* DECORATORS_HAVE_THIS */\n    var isStatic = !!(kind & 8); /* STATIC */\n    var base;\n    var initializers;\n    var hasPrivateBrand = instanceBrand;\n\n    kind &= 7 /* 0b111 */;\n\n    if (isStatic) {\n      base = Class;\n      // initialize staticInitializers when we see a non-field static member\n      if (kind !== 0 /* FIELD */) {\n        staticInitializers = staticInitializers || [];\n        initializers = staticInitializers;\n      }\n      if (isPrivate && !staticBrand) {\n        staticBrand = function (_) {\n          return checkInRHS(_) === Class;\n        };\n      }\n      hasPrivateBrand = staticBrand;\n    } else {\n      base = Class.prototype;\n      // initialize protoInitializers when we see a non-field member\n      if (kind !== 0 /* FIELD */) {\n        protoInitializers = protoInitializers || [];\n        initializers = protoInitializers;\n      }\n    }\n\n    if (kind !== 0 /* FIELD */ && !isPrivate) {\n      var existingNonFields = isStatic\n        ? existingStaticNonFields\n        : existingProtoNonFields;\n\n      var existingKind = existingNonFields.get(name) || 0;\n\n      if (\n        existingKind === true ||\n        (existingKind === 3 /* GETTER */ && kind !== 4) /* SETTER */ ||\n        (existingKind === 4 /* SETTER */ && kind !== 3) /* GETTER */\n      ) {\n        throw new Error(\n          \"Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: \" +\n            name\n        );\n      }\n      existingNonFields.set(\n        name,\n        !existingKind && kind > 2 /* METHOD */ ? kind : true\n      );\n    }\n\n    applyMemberDec(\n      ret,\n      base,\n      decInfo,\n      decoratorsHaveThis,\n      name,\n      kind,\n      isStatic,\n      isPrivate,\n      initializers,\n      hasPrivateBrand,\n      metadata\n    );\n  }\n\n  pushInitializers(ret, protoInitializers);\n  pushInitializers(ret, staticInitializers);\n  return ret;\n}\n\nfunction pushInitializers(ret, initializers) {\n  if (initializers) {\n    ret.push(function (instance) {\n      for (var i = 0; i < initializers.length; i++) {\n        initializers[i].call(instance);\n      }\n      return instance;\n    });\n  }\n}\n\nfunction applyClassDecs(targetClass, classDecs, decoratorsHaveThis, metadata) {\n  if (classDecs.length) {\n    var initializers = [];\n    var newClass = targetClass;\n    var name = targetClass.name;\n\n    var inc = decoratorsHaveThis ? 2 : 1;\n\n    for (var i = classDecs.length - 1; i >= 0; i -= inc) {\n      var decoratorFinishedRef = { v: false };\n\n      try {\n        var nextNewClass = classDecs[i].call(\n          decoratorsHaveThis ? classDecs[i - 1] : undefined,\n          newClass,\n          {\n            kind: \"class\",\n            name: name,\n            addInitializer: createAddInitializerMethod(\n              initializers,\n              decoratorFinishedRef\n            ),\n            metadata,\n          }\n        );\n      } finally {\n        decoratorFinishedRef.v = true;\n      }\n\n      if (nextNewClass !== undefined) {\n        assertValidReturnValue(5 /* CLASS */, nextNewClass);\n        newClass = nextNewClass;\n      }\n    }\n\n    return [\n      defineMetadata(newClass, metadata),\n      function () {\n        for (var i = 0; i < initializers.length; i++) {\n          initializers[i].call(newClass);\n        }\n      },\n    ];\n  }\n  // The transformer will not emit assignment when there are no class decorators,\n  // so we don't have to return an empty array here.\n}\n\nfunction defineMetadata(Class, metadata) {\n  return Object.defineProperty(\n    Class,\n    Symbol.metadata || Symbol.for(\"Symbol.metadata\"),\n    { configurable: true, enumerable: true, value: metadata }\n  );\n}\n\n/**\n  Basic usage:\n\n  applyDecs(\n    Class,\n    [\n      // member decorators\n      [\n        decs,               // dec, or array of decs, or array of this values and decs\n        0,                  // kind of value being decorated\n        'prop',             // name of public prop on class containing the value being decorated,\n        '#p',               // the name of the private property (if is private, void 0 otherwise),\n      ]\n    ],\n    [\n      // class decorators\n      dec1, dec2\n    ]\n  )\n  ```\n\n  Fully transpiled example:\n\n  ```js\n  @dec\n  class Class {\n    @dec\n    a = 123;\n\n    @dec\n    #a = 123;\n\n    @dec\n    @dec2\n    accessor b = 123;\n\n    @dec\n    accessor #b = 123;\n\n    @dec\n    c() { console.log('c'); }\n\n    @dec\n    #c() { console.log('privC'); }\n\n    @dec\n    get d() { console.log('d'); }\n\n    @dec\n    get #d() { console.log('privD'); }\n\n    @dec\n    set e(v) { console.log('e'); }\n\n    @dec\n    set #e(v) { console.log('privE'); }\n  }\n\n\n  // becomes\n  let initializeInstance;\n  let initializeClass;\n\n  let initA;\n  let initPrivA;\n\n  let initB;\n  let initPrivB, getPrivB, setPrivB;\n\n  let privC;\n  let privD;\n  let privE;\n\n  let Class;\n  class _Class {\n    static {\n      let ret = applyDecs(\n        this,\n        [\n          [dec, 0, 'a'],\n          [dec, 0, 'a', (i) => i.#a, (i, v) => i.#a = v],\n          [[dec, dec2], 1, 'b'],\n          [dec, 1, 'b', (i) => i.#privBData, (i, v) => i.#privBData = v],\n          [dec, 2, 'c'],\n          [dec, 2, 'c', () => console.log('privC')],\n          [dec, 3, 'd'],\n          [dec, 3, 'd', () => console.log('privD')],\n          [dec, 4, 'e'],\n          [dec, 4, 'e', () => console.log('privE')],\n        ],\n        [\n          dec\n        ]\n      );\n\n      initA = ret[0];\n\n      initPrivA = ret[1];\n\n      initB = ret[2];\n\n      initPrivB = ret[3];\n      getPrivB = ret[4];\n      setPrivB = ret[5];\n\n      privC = ret[6];\n\n      privD = ret[7];\n\n      privE = ret[8];\n\n      initializeInstance = ret[9];\n\n      Class = ret[10]\n\n      initializeClass = ret[11];\n    }\n\n    a = (initializeInstance(this), initA(this, 123));\n\n    #a = initPrivA(this, 123);\n\n    #bData = initB(this, 123);\n    get b() { return this.#bData }\n    set b(v) { this.#bData = v }\n\n    #privBData = initPrivB(this, 123);\n    get #b() { return getPrivB(this); }\n    set #b(v) { setPrivB(this, v); }\n\n    c() { console.log('c'); }\n\n    #c(...args) { return privC(this, ...args) }\n\n    get d() { console.log('d'); }\n\n    get #d() { return privD(this); }\n\n    set e(v) { console.log('e'); }\n\n    set #e(v) { privE(this, v); }\n  }\n\n  initializeClass(Class);\n */\n\nexport default function applyDecs2305(\n  targetClass,\n  memberDecs,\n  classDecs,\n  classDecsHaveThis,\n  instanceBrand,\n  parentClass\n) {\n  if (arguments.length >= 6) {\n    var parentMetadata =\n      parentClass[Symbol.metadata || Symbol.for(\"Symbol.metadata\")];\n  }\n  var metadata = Object.create(\n    parentMetadata === void 0 ? null : parentMetadata\n  );\n  var e = applyMemberDecs(targetClass, memberDecs, instanceBrand, metadata);\n  if (!classDecs.length) defineMetadata(targetClass, metadata);\n  return {\n    e: e,\n    // Lazily apply class decorations so that member init locals can be properly bound.\n    get c() {\n      return applyClassDecs(\n        targetClass,\n        classDecs,\n        classDecsHaveThis,\n        metadata\n      );\n    },\n  };\n}\n"],"mappings":";;;;;;AAEA,IAAAA,WAAA,GAAAC,OAAA;AAqBA,SAASC,0BAA0BA,CAACC,YAAY,EAAEC,oBAAoB,EAAE;EACtE,OAAO,SAASC,cAAcA,CAACC,WAAW,EAAE;IAC1CC,iBAAiB,CAACH,oBAAoB,EAAE,gBAAgB,CAAC;IACzDI,cAAc,CAACF,WAAW,EAAE,gBAAgB,CAAC;IAC7CH,YAAY,CAACM,IAAI,CAACH,WAAW,CAAC;EAChC,CAAC;AACH;AAEA,SAASI,uBAAuBA,CAACC,GAAG,EAAEC,MAAM,EAAE;EAC5C,IAAI,CAACD,GAAG,CAACC,MAAM,CAAC,EAAE;IAChB,MAAM,IAAIC,SAAS,CAAC,qDAAqD,CAAC;EAC5E;AACF;AAEA,SAASC,SAASA,CAChBC,GAAG,EACHC,OAAO,EACPC,IAAI,EACJC,IAAI,EACJf,YAAY,EACZgB,IAAI,EACJC,QAAQ,EACRC,SAAS,EACTC,KAAK,EACLC,eAAe,EACfC,QAAQ,EACR;EACA,IAAIC,OAAO;EAEX,QAAQN,IAAI;IACV,KAAK,CAAC;MACJM,OAAO,GAAG,UAAU;MACpB;IACF,KAAK,CAAC;MACJA,OAAO,GAAG,QAAQ;MAClB;IACF,KAAK,CAAC;MACJA,OAAO,GAAG,QAAQ;MAClB;IACF,KAAK,CAAC;MACJA,OAAO,GAAG,QAAQ;MAClB;IACF;MACEA,OAAO,GAAG,OAAO;EACrB;EAEA,IAAIC,GAAG,GAAG;IACRP,IAAI,EAAEM,OAAO;IACbR,IAAI,EAAEI,SAAS,GAAG,GAAG,GAAGJ,IAAI,GAAGA,IAAI;IACnCU,MAAM,EAAEP,QAAQ;IAChBQ,OAAO,EAAEP,SAAS;IAClBG,QAAQ,EAAEA;EACZ,CAAC;EAED,IAAIpB,oBAAoB,GAAG;IAAEyB,CAAC,EAAE;EAAM,CAAC;EAEvC,IAAIV,IAAI,KAAK,CAAC,EAAc;IAC1BO,GAAG,CAACrB,cAAc,GAAGH,0BAA0B,CAC7CC,YAAY,EACZC,oBACF,CAAC;EACH;EAEA,IAAI0B,GAAG,EAAEC,GAAG;EACZ,IAAI,CAACV,SAAS,KAAKF,IAAI,KAAK,CAAC,IAAgBA,IAAI,KAAK,CAAC,CAAC,EAAe;IACrEW,GAAG,GAAG,SAAAA,CAAUlB,MAAM,EAAE;MACtB,OAAOA,MAAM,CAACK,IAAI,CAAC;IACrB,CAAC;IACD,IAAIE,IAAI,KAAK,CAAC,EAAc;MAC1BY,GAAG,GAAG,SAAAA,CAAUnB,MAAM,EAAEiB,CAAC,EAAE;QACzBjB,MAAM,CAACK,IAAI,CAAC,GAAGY,CAAC;MAClB,CAAC;IACH;EACF,CAAC,MAAM,IAAIV,IAAI,KAAK,CAAC,EAAe;IAElCW,GAAG,GAAG,SAAAA,CAAUlB,MAAM,EAAE;MACtBF,uBAAuB,CAACa,eAAe,EAAEX,MAAM,CAAC;MAChD,OAAOM,IAAI,CAACI,KAAK;IACnB,CAAC;EACH,CAAC,MAAM;IAEL,IAAIU,CAAC,GAAGb,IAAI,KAAK,CAAC,IAAgBA,IAAI,KAAK,CAAC;IAC5C,IAAIa,CAAC,IAAIb,IAAI,KAAK,CAAC,EAAe;MAChC,IAAIE,SAAS,EAAE;QACbS,GAAG,GAAG,SAAAA,CAAUlB,MAAM,EAAE;UACtBF,uBAAuB,CAACa,eAAe,EAAEX,MAAM,CAAC;UAChD,OAAOM,IAAI,CAACY,GAAG,CAACG,IAAI,CAACrB,MAAM,CAAC;QAC9B,CAAC;MACH,CAAC,MAAM;QACLkB,GAAG,GAAG,SAAAA,CAAUlB,MAAM,EAAE;UACtB,OAAOM,IAAI,CAACY,GAAG,CAACG,IAAI,CAACrB,MAAM,CAAC;QAC9B,CAAC;MACH;IACF;IACA,IAAIoB,CAAC,IAAIb,IAAI,KAAK,CAAC,EAAe;MAChC,IAAIE,SAAS,EAAE;QACbU,GAAG,GAAG,SAAAA,CAAUnB,MAAM,EAAEU,KAAK,EAAE;UAC7BZ,uBAAuB,CAACa,eAAe,EAAEX,MAAM,CAAC;UAChDM,IAAI,CAACa,GAAG,CAACE,IAAI,CAACrB,MAAM,EAAEU,KAAK,CAAC;QAC9B,CAAC;MACH,CAAC,MAAM;QACLS,GAAG,GAAG,SAAAA,CAAUnB,MAAM,EAAEU,KAAK,EAAE;UAC7BJ,IAAI,CAACa,GAAG,CAACE,IAAI,CAACrB,MAAM,EAAEU,KAAK,CAAC;QAC9B,CAAC;MACH;IACF;EACF;EACA,IAAIX,GAAG,GAAGU,SAAS,GACfE,eAAe,CAACW,IAAI,CAAC,CAAC,GACtB,UAAUtB,MAAM,EAAE;IAChB,OAAOK,IAAI,IAAIL,MAAM;EACvB,CAAC;EACLc,GAAG,CAACS,MAAM,GACRL,GAAG,IAAIC,GAAG,GACN;IAAED,GAAG,EAAEA,GAAG;IAAEC,GAAG,EAAEA,GAAG;IAAEpB,GAAG,EAAEA;EAAI,CAAC,GAChCmB,GAAG,GACD;IAAEA,GAAG,EAAEA,GAAG;IAAEnB,GAAG,EAAEA;EAAI,CAAC,GACtB;IAAEoB,GAAG,EAAEA,GAAG;IAAEpB,GAAG,EAAEA;EAAI,CAAC;EAE9B,IAAI;IACF,OAAOI,GAAG,CAACkB,IAAI,CAACjB,OAAO,EAAEM,KAAK,EAAEI,GAAG,CAAC;EACtC,CAAC,SAAS;IACRtB,oBAAoB,CAACyB,CAAC,GAAG,IAAI;EAC/B;AACF;AAEA,SAAStB,iBAAiBA,CAACH,oBAAoB,EAAEgC,MAAM,EAAE;EACvD,IAAIhC,oBAAoB,CAACyB,CAAC,EAAE;IAC1B,MAAM,IAAIQ,KAAK,CACb,oBAAoB,GAAGD,MAAM,GAAG,gCAClC,CAAC;EACH;AACF;AAEA,SAAS5B,cAAcA,CAAC8B,EAAE,EAAEC,IAAI,EAAE;EAChC,IAAI,OAAOD,EAAE,KAAK,UAAU,EAAE;IAC5B,MAAM,IAAIzB,SAAS,CAAC0B,IAAI,GAAG,qBAAqB,CAAC;EACnD;AACF;AAEA,SAASC,sBAAsBA,CAACrB,IAAI,EAAEG,KAAK,EAAE;EAC3C,IAAImB,IAAI,GAAG,OAAOnB,KAAK;EAEvB,IAAIH,IAAI,KAAK,CAAC,EAAiB;IAC7B,IAAIsB,IAAI,KAAK,QAAQ,IAAInB,KAAK,KAAK,IAAI,EAAE;MACvC,MAAM,IAAIT,SAAS,CACjB,uFACF,CAAC;IACH;IACA,IAAIS,KAAK,CAACQ,GAAG,KAAKY,SAAS,EAAE;MAC3BlC,cAAc,CAACc,KAAK,CAACQ,GAAG,EAAE,cAAc,CAAC;IAC3C;IACA,IAAIR,KAAK,CAACS,GAAG,KAAKW,SAAS,EAAE;MAC3BlC,cAAc,CAACc,KAAK,CAACS,GAAG,EAAE,cAAc,CAAC;IAC3C;IACA,IAAIT,KAAK,CAACqB,IAAI,KAAKD,SAAS,EAAE;MAC5BlC,cAAc,CAACc,KAAK,CAACqB,IAAI,EAAE,eAAe,CAAC;IAC7C;EACF,CAAC,MAAM,IAAIF,IAAI,KAAK,UAAU,EAAE;IAC9B,IAAIF,IAAI;IACR,IAAIpB,IAAI,KAAK,CAAC,EAAc;MAC1BoB,IAAI,GAAG,OAAO;IAChB,CAAC,MAAM,IAAIpB,IAAI,KAAK,CAAC,EAAc;MACjCoB,IAAI,GAAG,OAAO;IAChB,CAAC,MAAM;MACLA,IAAI,GAAG,QAAQ;IACjB;IACA,MAAM,IAAI1B,SAAS,CAAC0B,IAAI,GAAG,8CAA8C,CAAC;EAC5E;AACF;AAEA,SAASK,UAAUA,CAACN,EAAE,EAAE;EACtB,OAAO,YAAY;IACjB,OAAOA,EAAE,CAAC,IAAI,CAAC;EACjB,CAAC;AACH;AACA,SAASO,UAAUA,CAACP,EAAE,EAAE;EACtB,OAAO,UAAUhB,KAAK,EAAE;IACtBgB,EAAE,CAAC,IAAI,EAAEhB,KAAK,CAAC;EACjB,CAAC;AACH;AAEA,SAASwB,cAAcA,CACrBC,GAAG,EACHC,IAAI,EACJC,OAAO,EACPC,kBAAkB,EAClBjC,IAAI,EACJE,IAAI,EACJC,QAAQ,EACRC,SAAS,EACTlB,YAAY,EACZoB,eAAe,EACfC,QAAQ,EACR;EACA,IAAI2B,IAAI,GAAGF,OAAO,CAAC,CAAC,CAAC;EAErB,IAAI,CAACC,kBAAkB,IAAI,CAACE,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;IAC/CA,IAAI,GAAG,CAACA,IAAI,CAAC;EACf;EAEA,IAAIjC,IAAI,EAAEyB,IAAI,EAAErB,KAAK;EAErB,IAAID,SAAS,EAAE;IACb,IAAIF,IAAI,KAAK,CAAC,IAAgBA,IAAI,KAAK,CAAC,EAAiB;MACvDD,IAAI,GAAG;QACLY,GAAG,EAAEc,UAAU,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC;QAC3BlB,GAAG,EAAEc,UAAU,CAACI,OAAO,CAAC,CAAC,CAAC;MAC5B,CAAC;IACH,CAAC,MAAM;MACL,IAAI9B,IAAI,KAAK,CAAC,EAAe;QAC3BD,IAAI,GAAG;UACLY,GAAG,EAAEmB,OAAO,CAAC,CAAC;QAChB,CAAC;MACH,CAAC,MAAM,IAAI9B,IAAI,KAAK,CAAC,EAAe;QAClCD,IAAI,GAAG;UACLa,GAAG,EAAEkB,OAAO,CAAC,CAAC;QAChB,CAAC;MACH,CAAC,MAAM;QACL/B,IAAI,GAAG;UACLI,KAAK,EAAE2B,OAAO,CAAC,CAAC;QAClB,CAAC;MACH;IACF;EACF,CAAC,MAAM,IAAI9B,IAAI,KAAK,CAAC,EAAc;IACjCD,IAAI,GAAGoC,MAAM,CAACC,wBAAwB,CAACP,IAAI,EAAE/B,IAAI,CAAC;EACpD;EAEA,IAAIE,IAAI,KAAK,CAAC,EAAiB;IAC7BG,KAAK,GAAG;MACNQ,GAAG,EAAEZ,IAAI,CAACY,GAAG;MACbC,GAAG,EAAEb,IAAI,CAACa;IACZ,CAAC;EACH,CAAC,MAAM,IAAIZ,IAAI,KAAK,CAAC,EAAe;IAClCG,KAAK,GAAGJ,IAAI,CAACI,KAAK;EACpB,CAAC,MAAM,IAAIH,IAAI,KAAK,CAAC,EAAe;IAClCG,KAAK,GAAGJ,IAAI,CAACY,GAAG;EAClB,CAAC,MAAM,IAAIX,IAAI,KAAK,CAAC,EAAe;IAClCG,KAAK,GAAGJ,IAAI,CAACa,GAAG;EAClB;EAEA,IAAIyB,QAAQ,EAAE1B,GAAG,EAAEC,GAAG;EAEtB,IAAI0B,GAAG,GAAGP,kBAAkB,GAAG,CAAC,GAAG,CAAC;EAEpC,KAAK,IAAIQ,CAAC,GAAGP,IAAI,CAACQ,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,IAAID,GAAG,EAAE;IAC9C,IAAI1C,GAAG,GAAGoC,IAAI,CAACO,CAAC,CAAC;IAEjBF,QAAQ,GAAG1C,SAAS,CAClBC,GAAG,EACHmC,kBAAkB,GAAGC,IAAI,CAACO,CAAC,GAAG,CAAC,CAAC,GAAGhB,SAAS,EAC5CzB,IAAI,EACJC,IAAI,EACJf,YAAY,EACZgB,IAAI,EACJC,QAAQ,EACRC,SAAS,EACTC,KAAK,EACLC,eAAe,EACfC,QACF,CAAC;IAED,IAAIgC,QAAQ,KAAK,KAAK,CAAC,EAAE;MACvBhB,sBAAsB,CAACrB,IAAI,EAAEqC,QAAQ,CAAC;MACtC,IAAII,OAAO;MAEX,IAAIzC,IAAI,KAAK,CAAC,EAAc;QAC1ByC,OAAO,GAAGJ,QAAQ;MACpB,CAAC,MAAM,IAAIrC,IAAI,KAAK,CAAC,EAAiB;QACpCyC,OAAO,GAAGJ,QAAQ,CAACb,IAAI;QACvBb,GAAG,GAAG0B,QAAQ,CAAC1B,GAAG,IAAIR,KAAK,CAACQ,GAAG;QAC/BC,GAAG,GAAGyB,QAAQ,CAACzB,GAAG,IAAIT,KAAK,CAACS,GAAG;QAE/BT,KAAK,GAAG;UAAEQ,GAAG,EAAEA,GAAG;UAAEC,GAAG,EAAEA;QAAI,CAAC;MAChC,CAAC,MAAM;QACLT,KAAK,GAAGkC,QAAQ;MAClB;MAEA,IAAII,OAAO,KAAK,KAAK,CAAC,EAAE;QACtB,IAAIjB,IAAI,KAAK,KAAK,CAAC,EAAE;UACnBA,IAAI,GAAGiB,OAAO;QAChB,CAAC,MAAM,IAAI,OAAOjB,IAAI,KAAK,UAAU,EAAE;UACrCA,IAAI,GAAG,CAACA,IAAI,EAAEiB,OAAO,CAAC;QACxB,CAAC,MAAM;UACLjB,IAAI,CAAClC,IAAI,CAACmD,OAAO,CAAC;QACpB;MACF;IACF;EACF;EAEA,IAAIzC,IAAI,KAAK,CAAC,IAAgBA,IAAI,KAAK,CAAC,EAAiB;IACvD,IAAIwB,IAAI,KAAK,KAAK,CAAC,EAAE;MAEnBA,IAAI,GAAG,SAAAA,CAAUkB,QAAQ,EAAElB,IAAI,EAAE;QAC/B,OAAOA,IAAI;MACb,CAAC;IACH,CAAC,MAAM,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;MACrC,IAAImB,eAAe,GAAGnB,IAAI;MAE1BA,IAAI,GAAG,SAAAA,CAAUkB,QAAQ,EAAElB,IAAI,EAAE;QAC/B,IAAIrB,KAAK,GAAGqB,IAAI;QAEhB,KAAK,IAAIe,CAAC,GAAGI,eAAe,CAACH,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;UACpDpC,KAAK,GAAGwC,eAAe,CAACJ,CAAC,CAAC,CAACzB,IAAI,CAAC4B,QAAQ,EAAEvC,KAAK,CAAC;QAClD;QAEA,OAAOA,KAAK;MACd,CAAC;IACH,CAAC,MAAM;MACL,IAAIyC,mBAAmB,GAAGpB,IAAI;MAE9BA,IAAI,GAAG,SAAAA,CAAUkB,QAAQ,EAAElB,IAAI,EAAE;QAC/B,OAAOoB,mBAAmB,CAAC9B,IAAI,CAAC4B,QAAQ,EAAElB,IAAI,CAAC;MACjD,CAAC;IACH;IAEAI,GAAG,CAACtC,IAAI,CAACkC,IAAI,CAAC;EAChB;EAEA,IAAIxB,IAAI,KAAK,CAAC,EAAc;IAC1B,IAAIA,IAAI,KAAK,CAAC,EAAiB;MAC7BD,IAAI,CAACY,GAAG,GAAGR,KAAK,CAACQ,GAAG;MACpBZ,IAAI,CAACa,GAAG,GAAGT,KAAK,CAACS,GAAG;IACtB,CAAC,MAAM,IAAIZ,IAAI,KAAK,CAAC,EAAe;MAClCD,IAAI,CAACI,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM,IAAIH,IAAI,KAAK,CAAC,EAAe;MAClCD,IAAI,CAACY,GAAG,GAAGR,KAAK;IAClB,CAAC,MAAM,IAAIH,IAAI,KAAK,CAAC,EAAe;MAClCD,IAAI,CAACa,GAAG,GAAGT,KAAK;IAClB;IAEA,IAAID,SAAS,EAAE;MACb,IAAIF,IAAI,KAAK,CAAC,EAAiB;QAC7B4B,GAAG,CAACtC,IAAI,CAAC,UAAUoD,QAAQ,EAAEG,IAAI,EAAE;UACjC,OAAO1C,KAAK,CAACQ,GAAG,CAACG,IAAI,CAAC4B,QAAQ,EAAEG,IAAI,CAAC;QACvC,CAAC,CAAC;QACFjB,GAAG,CAACtC,IAAI,CAAC,UAAUoD,QAAQ,EAAEG,IAAI,EAAE;UACjC,OAAO1C,KAAK,CAACS,GAAG,CAACE,IAAI,CAAC4B,QAAQ,EAAEG,IAAI,CAAC;QACvC,CAAC,CAAC;MACJ,CAAC,MAAM,IAAI7C,IAAI,KAAK,CAAC,EAAe;QAClC4B,GAAG,CAACtC,IAAI,CAACa,KAAK,CAAC;MACjB,CAAC,MAAM;QACLyB,GAAG,CAACtC,IAAI,CAAC,UAAUoD,QAAQ,EAAEG,IAAI,EAAE;UACjC,OAAO1C,KAAK,CAACW,IAAI,CAAC4B,QAAQ,EAAEG,IAAI,CAAC;QACnC,CAAC,CAAC;MACJ;IACF,CAAC,MAAM;MACLV,MAAM,CAACW,cAAc,CAACjB,IAAI,EAAE/B,IAAI,EAAEC,IAAI,CAAC;IACzC;EACF;AACF;AAEA,SAASgD,eAAeA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,aAAa,EAAE7C,QAAQ,EAAE;EACjE,IAAIuB,GAAG,GAAG,EAAE;EACZ,IAAIuB,iBAAiB;EACrB,IAAIC,kBAAkB;EACtB,IAAIC,WAAW;EAEf,IAAIC,sBAAsB,GAAG,IAAIC,GAAG,CAAC,CAAC;EACtC,IAAIC,uBAAuB,GAAG,IAAID,GAAG,CAAC,CAAC;EAEvC,KAAK,IAAIhB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGU,QAAQ,CAACT,MAAM,EAAED,CAAC,EAAE,EAAE;IACxC,IAAIT,OAAO,GAAGmB,QAAQ,CAACV,CAAC,CAAC;IAGzB,IAAI,CAACN,KAAK,CAACC,OAAO,CAACJ,OAAO,CAAC,EAAE;IAE7B,IAAI9B,IAAI,GAAG8B,OAAO,CAAC,CAAC,CAAC;IACrB,IAAIhC,IAAI,GAAGgC,OAAO,CAAC,CAAC,CAAC;IACrB,IAAI5B,SAAS,GAAG4B,OAAO,CAACU,MAAM,GAAG,CAAC;IAElC,IAAIT,kBAAkB,GAAG/B,IAAI,GAAG,EAAE;IAClC,IAAIC,QAAQ,GAAG,CAAC,EAAED,IAAI,GAAG,CAAC,CAAC;IAC3B,IAAI6B,IAAI;IACR,IAAI7C,YAAY;IAChB,IAAIoB,eAAe,GAAG8C,aAAa;IAEnClD,IAAI,IAAI,CAAC;IAET,IAAIC,QAAQ,EAAE;MACZ4B,IAAI,GAAGmB,KAAK;MAEZ,IAAIhD,IAAI,KAAK,CAAC,EAAc;QAC1BoD,kBAAkB,GAAGA,kBAAkB,IAAI,EAAE;QAC7CpE,YAAY,GAAGoE,kBAAkB;MACnC;MACA,IAAIlD,SAAS,IAAI,CAACmD,WAAW,EAAE;QAC7BA,WAAW,GAAG,SAAAA,CAAUI,CAAC,EAAE;UACzB,OAAOC,WAAU,CAACD,CAAC,CAAC,KAAKT,KAAK;QAChC,CAAC;MACH;MACA5C,eAAe,GAAGiD,WAAW;IAC/B,CAAC,MAAM;MACLxB,IAAI,GAAGmB,KAAK,CAACW,SAAS;MAEtB,IAAI3D,IAAI,KAAK,CAAC,EAAc;QAC1BmD,iBAAiB,GAAGA,iBAAiB,IAAI,EAAE;QAC3CnE,YAAY,GAAGmE,iBAAiB;MAClC;IACF;IAEA,IAAInD,IAAI,KAAK,CAAC,IAAgB,CAACE,SAAS,EAAE;MACxC,IAAI0D,iBAAiB,GAAG3D,QAAQ,GAC5BuD,uBAAuB,GACvBF,sBAAsB;MAE1B,IAAIO,YAAY,GAAGD,iBAAiB,CAACjD,GAAG,CAACb,IAAI,CAAC,IAAI,CAAC;MAEnD,IACE+D,YAAY,KAAK,IAAI,IACpBA,YAAY,KAAK,CAAC,IAAiB7D,IAAI,KAAK,CAAE,IAC9C6D,YAAY,KAAK,CAAC,IAAiB7D,IAAI,KAAK,CAAE,EAC/C;QACA,MAAM,IAAIkB,KAAK,CACb,uMAAuM,GACrMpB,IACJ,CAAC;MACH;MACA8D,iBAAiB,CAAChD,GAAG,CACnBd,IAAI,EACJ,CAAC+D,YAAY,IAAI7D,IAAI,GAAG,CAAC,GAAgBA,IAAI,GAAG,IAClD,CAAC;IACH;IAEA2B,cAAc,CACZC,GAAG,EACHC,IAAI,EACJC,OAAO,EACPC,kBAAkB,EAClBjC,IAAI,EACJE,IAAI,EACJC,QAAQ,EACRC,SAAS,EACTlB,YAAY,EACZoB,eAAe,EACfC,QACF,CAAC;EACH;EAEAyD,gBAAgB,CAAClC,GAAG,EAAEuB,iBAAiB,CAAC;EACxCW,gBAAgB,CAAClC,GAAG,EAAEwB,kBAAkB,CAAC;EACzC,OAAOxB,GAAG;AACZ;AAEA,SAASkC,gBAAgBA,CAAClC,GAAG,EAAE5C,YAAY,EAAE;EAC3C,IAAIA,YAAY,EAAE;IAChB4C,GAAG,CAACtC,IAAI,CAAC,UAAUoD,QAAQ,EAAE;MAC3B,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGvD,YAAY,CAACwD,MAAM,EAAED,CAAC,EAAE,EAAE;QAC5CvD,YAAY,CAACuD,CAAC,CAAC,CAACzB,IAAI,CAAC4B,QAAQ,CAAC;MAChC;MACA,OAAOA,QAAQ;IACjB,CAAC,CAAC;EACJ;AACF;AAEA,SAASqB,cAAcA,CAACC,WAAW,EAAEC,SAAS,EAAElC,kBAAkB,EAAE1B,QAAQ,EAAE;EAC5E,IAAI4D,SAAS,CAACzB,MAAM,EAAE;IACpB,IAAIxD,YAAY,GAAG,EAAE;IACrB,IAAIkF,QAAQ,GAAGF,WAAW;IAC1B,IAAIlE,IAAI,GAAGkE,WAAW,CAAClE,IAAI;IAE3B,IAAIwC,GAAG,GAAGP,kBAAkB,GAAG,CAAC,GAAG,CAAC;IAEpC,KAAK,IAAIQ,CAAC,GAAG0B,SAAS,CAACzB,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,IAAID,GAAG,EAAE;MACnD,IAAIrD,oBAAoB,GAAG;QAAEyB,CAAC,EAAE;MAAM,CAAC;MAEvC,IAAI;QACF,IAAIyD,YAAY,GAAGF,SAAS,CAAC1B,CAAC,CAAC,CAACzB,IAAI,CAClCiB,kBAAkB,GAAGkC,SAAS,CAAC1B,CAAC,GAAG,CAAC,CAAC,GAAGhB,SAAS,EACjD2C,QAAQ,EACR;UACElE,IAAI,EAAE,OAAO;UACbF,IAAI,EAAEA,IAAI;UACVZ,cAAc,EAAEH,0BAA0B,CACxCC,YAAY,EACZC,oBACF,CAAC;UACDoB;QACF,CACF,CAAC;MACH,CAAC,SAAS;QACRpB,oBAAoB,CAACyB,CAAC,GAAG,IAAI;MAC/B;MAEA,IAAIyD,YAAY,KAAK5C,SAAS,EAAE;QAC9BF,sBAAsB,CAAC,CAAC,EAAc8C,YAAY,CAAC;QACnDD,QAAQ,GAAGC,YAAY;MACzB;IACF;IAEA,OAAO,CACLC,cAAc,CAACF,QAAQ,EAAE7D,QAAQ,CAAC,EAClC,YAAY;MACV,KAAK,IAAIkC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGvD,YAAY,CAACwD,MAAM,EAAED,CAAC,EAAE,EAAE;QAC5CvD,YAAY,CAACuD,CAAC,CAAC,CAACzB,IAAI,CAACoD,QAAQ,CAAC;MAChC;IACF,CAAC,CACF;EACH;AAGF;AAEA,SAASE,cAAcA,CAACpB,KAAK,EAAE3C,QAAQ,EAAE;EACvC,OAAO8B,MAAM,CAACW,cAAc,CAC1BE,KAAK,EACLqB,MAAM,CAAChE,QAAQ,IAAIgE,MAAM,CAACC,GAAG,CAAC,iBAAiB,CAAC,EAChD;IAAEC,YAAY,EAAE,IAAI;IAAEC,UAAU,EAAE,IAAI;IAAErE,KAAK,EAAEE;EAAS,CAC1D,CAAC;AACH;AAoJe,SAASoE,aAAaA,CACnCT,WAAW,EACXU,UAAU,EACVT,SAAS,EACTU,iBAAiB,EACjBzB,aAAa,EACb0B,WAAW,EACX;EACA,IAAIC,SAAS,CAACrC,MAAM,IAAI,CAAC,EAAE;IACzB,IAAIsC,cAAc,GAChBF,WAAW,CAACP,MAAM,CAAChE,QAAQ,IAAIgE,MAAM,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAAC;EACjE;EACA,IAAIjE,QAAQ,GAAG8B,MAAM,CAAC4C,MAAM,CAC1BD,cAAc,KAAK,KAAK,CAAC,GAAG,IAAI,GAAGA,cACrC,CAAC;EACD,IAAIE,CAAC,GAAGjC,eAAe,CAACiB,WAAW,EAAEU,UAAU,EAAExB,aAAa,EAAE7C,QAAQ,CAAC;EACzE,IAAI,CAAC4D,SAAS,CAACzB,MAAM,EAAE4B,cAAc,CAACJ,WAAW,EAAE3D,QAAQ,CAAC;EAC5D,OAAO;IACL2E,CAAC,EAAEA,CAAC;IAEJ,IAAIC,CAACA,CAAA,EAAG;MACN,OAAOlB,cAAc,CACnBC,WAAW,EACXC,SAAS,EACTU,iBAAiB,EACjBtE,QACF,CAAC;IACH;EACF,CAAC;AACH"}
>>>>>>> 368829441b0ff24df615780319458f1adfc4d194
